<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="css/index.css">
  <title>Camera and QR Code Scanner</title>
  <script src="js/main.js"></script>
  <script src="js/buttonclick.js" defer></script>
</head>

<body>

<div class="main">
  <div class="header">
    <h1>Adjust your video screen:</h1>
    <div class="slider">
      <div class="slider-handle"></div>
    </div>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        var slider = document.querySelector('.slider');
        var handle = document.querySelector('.slider-handle');
        var isDragging = false;

        var startEvent = 'mousedown';
        var moveEvent = 'mousemove';
        var endEvent = 'mouseup';

        if ('ontouchstart' in window || navigator.msMaxTouchPoints) {
          startEvent = 'touchstart';
          moveEvent = 'touchmove';
          endEvent = 'touchend';
        }

        handle.addEventListener(startEvent, function() {
          isDragging = true;
          handle.style.cursor = 'grabbing';
        });

        handle.addEventListener(endEvent, function() {
          isDragging = false;
          handle.style.cursor = 'grab';
        });
        handle.style.left = slider.offsetWidth - handle.offsetWidth + 80 + 'px';

        slider.addEventListener(moveEvent, function(e) {
          if (isDragging) {
            var sliderWidth = slider.offsetWidth;
            var handleWidth = handle.offsetWidth;
            var maxX = sliderWidth - handleWidth + 80;
            var clientX = e.clientX || e.touches[0].clientX;
            var newX = Math.min(Math.max(clientX - slider.offsetLeft, 0), maxX);
            handle.style.left = newX + 'px';
            var handlePosition = newX / maxX;
            var scanner = document.querySelector('.scanner');
            scanner.style.height = (handlePosition * window.screen.availHeight*1.5) + 350 + 'px'; // Adjust the multiplier as per your requirement
          }
        });
      });
    </script>
  </div>
  <div class="scanner">
    <div style="width:800px" id="reader"></div>
    <script type="text/javascript">
      function onScanSuccess(qrCodeMessage) {
        document.getElementById('result').innerHTML = '<span class="result">'+qrCodeMessage+'</span>';
        //Do something if scanned met parameter qrCodeMessage!
        scanned();
      }

      function onScanError(errorMessage) {
        //handle scan error
      }

      var html5QrcodeScanner = new Html5QrcodeScanner(
        "reader", { fps: 10, qrbox: 500 });
      html5QrcodeScanner.render(onScanSuccess, onScanError);
    </script>
  </div>
  <div class="score">
    <h4 id="hi">SCAN RESULT</h4>
    <div id="result">Result Here</div>
  </div>
</div>

</body>
</html>
